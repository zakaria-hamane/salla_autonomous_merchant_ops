# Dashboard Display Gaps Analysis

## Overview

This document identifies data generated by the backend that is **not currently displayed** in the frontend dashboard, based on the implementation plan checklist.

---

## âŒ Missing from Dashboard

### 1. Audit Log (High Priority)

**What Backend Generates:**
```python
audit_log: [
    {"action": "workflow_started", "merchant_id": "..."},
    {"action": "validation_run", "flags_found": 2},
    {"action": "workflow_completed", "alert_level": "GREEN", "metrics": {...}}
]
```

**Why It Matters:**
- Provides full transparency of workflow execution
- Essential for debugging and compliance
- Shows sequence of agent activations

**Proposed Display:**
- Collapsible "Audit Trail" section at bottom of dashboard
- Timeline view showing each action with timestamp
- Filterable by action type

---

### 2. Merchant Locks Detail (High Priority)

**What Backend Tracks:**
```python
merchant_locks: {
    "P001": {"reason": "Manual override", "locked_at": "2026-02-08"},
    "P005": {"reason": "Promotional pricing", "locked_at": "2026-02-07"}
}
```

**Current Display:**
- âœ… Shows count: "Locked Products: 2"
- âŒ Doesn't show WHICH products are locked
- âŒ Doesn't show WHY they're locked

**Why It Matters:**
- Merchants need to see which products have manual overrides
- Important for understanding why pricing wasn't changed
- Helps prevent confusion ("Why didn't the system update this?")

**Proposed Display:**
- Dedicated "Locked Products" section
- Table showing: Product ID, Product Name, Lock Reason, Locked Date
- Visual indicator in pricing actions table for locked items

---

### 3. Schema Validation Status (Medium Priority)

**What Backend Tracks:**
```python
schema_validation_passed: True/False
retry_count: 0-2
```

**Why It Matters:**
- Shows if catalog agent had trouble parsing data
- Indicates data quality issues
- Helps debug why workflow might have failed

**Proposed Display:**
- Small status indicator in Summary section
- "Data Quality: âœ“ Valid" or "âš ï¸ Validation Issues (2 retries)"
- Link to catalog issues section if validation failed

---

### 4. Throttle Mode Indicator (Medium Priority)

**What Backend Tracks:**
```python
throttle_mode_active: True/False
```

**Current Display:**
- âœ… Shows alert message when FROZEN
- âŒ No persistent indicator of throttle status

**Why It Matters:**
- Clear visual indicator that system is in safety mode
- Prevents confusion about why no pricing changes occurred

**Proposed Display:**
- Persistent badge in header: "ðŸ”´ THROTTLE MODE ACTIVE"
- Appears even after workflow completes
- Shows when throttle was activated

---

### 5. Support Message Classification Breakdown (Low Priority)

**What Backend Could Generate:**
```python
support_summary: {
    "sentiment": 0.3,
    "velocity": 2.5,
    "total_messages": 20,
    "breakdown": {  # Currently not generated
        "Inquiry": 12,
        "Complaint": 5,
        "Suggestion": 2,
        "Transactional": 1
    }
}
```

**Why It Matters:**
- Helps merchants understand customer communication patterns
- Identifies if complaints are increasing
- Useful for customer service planning

**Proposed Display:**
- Pie chart or bar chart in Support Analysis section
- Shows distribution of message types

---

### 6. Cost & Profit Margin Display (Low Priority)

**What Backend Has:**
```python
pricing_actions: [
    {
        "product_id": "P001",
        "current_price": 120.00,
        "proposed_price": 115.00,
        "cost": 60.00,  # Available but not displayed
        "final_price": 115.00
    }
]
```

**Why It Matters:**
- Merchants want to see profit margins
- Helps evaluate if pricing changes are profitable
- Important for business decision-making

**Proposed Display:**
- Add "Margin" column to pricing actions table
- Show: "Margin: 47.8% ($55.00)"
- Color-code: Green if margin > 30%, Yellow if 15-30%, Red if < 15%

---

### 7. Normalized Catalog Preview (Low Priority)

**What Backend Generates:**
```python
normalized_catalog: [
    {
        "id": "P001",
        "name": "Espresso Maker",
        "price": 120.00,
        "cost": 60.00,
        "original_text": "Espresso Maker - $120 (cost: $60)"
    }
]
```

**Why It Matters:**
- Shows what the AI "understood" from raw data
- Helps debug parsing issues
- Useful for data quality verification

**Proposed Display:**
- Collapsible "Data Interpretation" section
- Side-by-side view: Raw Input â†’ Normalized Output
- Only show if catalog issues exist

---

## âœ… Currently Displayed (Reference)

| Data Field | Display Location | Status |
|------------|------------------|--------|
| Status | Header | âœ… |
| Alert Level | Badge | âœ… |
| Summary Stats | Summary Section | âœ… |
| Reliability Metrics | Metrics Section | âœ… |
| Validation Flags | Validation Section | âœ… |
| Catalog Issues | Catalog Health | âœ… |
| Support Summary | Support Analysis | âœ… |
| Pricing Actions | Pricing Table | âœ… |
| Warnings | Warnings Section | âœ… |
| Recommendations | Recommendations Section | âœ… |

---

## Priority Implementation Order

### Phase 1: High Priority (Immediate Value)
1. **Merchant Locks Detail** - Critical for transparency
2. **Audit Log** - Essential for debugging and compliance

### Phase 2: Medium Priority (Enhanced Debugging)
3. **Schema Validation Status** - Helps identify data quality issues
4. **Throttle Mode Indicator** - Clearer safety status

### Phase 3: Low Priority (Nice to Have)
5. **Support Message Breakdown** - Better insights
6. **Cost & Profit Margins** - Business intelligence
7. **Normalized Catalog Preview** - Advanced debugging

---

## Implementation Estimates

| Feature | Backend Changes | Frontend Changes | Effort |
|---------|----------------|------------------|--------|
| Merchant Locks Detail | None (already in state) | New section + table | 2 hours |
| Audit Log | None (already in state) | New section + timeline | 3 hours |
| Schema Validation | None (already in state) | Status indicator | 1 hour |
| Throttle Indicator | None (already in state) | Badge component | 1 hour |
| Message Breakdown | Add to support_agent | Chart component | 4 hours |
| Profit Margins | None (cost already available) | Add column | 1 hour |
| Catalog Preview | None (already in state) | Collapsible section | 2 hours |

**Total Estimated Effort:** 14 hours for all features

---

## Recommended Next Steps

1. **Quick Wins (4 hours):**
   - Add Merchant Locks detail table
   - Add Schema Validation status indicator
   - Add Throttle Mode badge
   - Add Profit Margin column

2. **Medium Effort (3 hours):**
   - Implement Audit Log timeline view

3. **Future Enhancements (7 hours):**
   - Support message breakdown chart
   - Normalized catalog preview

---

**Document Version:** 1.0  
**Analysis Date:** February 8, 2026  
**Status:** Ready for Implementation
